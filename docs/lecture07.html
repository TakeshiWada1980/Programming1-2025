<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="robots" content="noindex,nofollow,noarchive" />
    <meta name="referrer" content="no-referrer" />

    <script>
      MathJax = {
        chtml: {
          displayAlign: "left",
          displayIndent: "1em",
        },
      };
    </script>

     <script
src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
type="text/javascript"></script> 

    <link rel="icon" href="favicon.ico" sizes="any" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c"
    />
    <link rel="stylesheet" href="style.css" />

    <title>第07回 2I-プログラミング1</title>
  </head>

  <body>
    <div class="openbtn"><span></span><span></span><span></span></div>
    <nav id="g-nav">
      <div id="g-nav-list">
        <!-- ---------------------------------------- -->
         <ul>
<li><a href="#準備と講義概要" id="toc-準備と講義概要"><span
class="toc-section-number">1</span> 準備と講義概要</a></li>
<li><a href="#mathライブラリ" id="toc-mathライブラリ"><span
class="toc-section-number">2</span> Mathライブラリ</a>
<ul>
<li><a href="#演習1-目標時間-12分" id="toc-演習1-目標時間-12分"><span
class="toc-section-number">2.1</span> 演習1
(<i class="fa-solid fa-stopwatch"></i> 目標時間: 12分)</a></li>
</ul></li>
<li><a href="#組込み関数-数学系" id="toc-組込み関数-数学系"><span
class="toc-section-number">3</span> 組込み関数 (数学系)</a>
<ul>
<li><a href="#とても重要なこと" id="toc-とても重要なこと"><span
class="toc-section-number">3.1</span>
とても重要なこと<i class="fa-solid fa-triangle-exclamation"></i></a></li>
</ul></li>
<li><a href="#繰り返し構文におけるループ変数の参照"
id="toc-繰り返し構文におけるループ変数の参照"><span
class="toc-section-number">4</span>
繰り返し構文におけるループ変数の参照</a>
<ul>
<li><a href="#ループ変数の参照" id="toc-ループ変数の参照"><span
class="toc-section-number">4.1</span> ループ変数の参照</a></li>
<li><a href="#等差数列の生成" id="toc-等差数列の生成"><span
class="toc-section-number">4.2</span> 等差数列の生成</a></li>
<li><a href="#等比数列の生成" id="toc-等比数列の生成"><span
class="toc-section-number">4.3</span> 等比数列の生成</a></li>
<li><a href="#累積値の計算" id="toc-累積値の計算"><span
class="toc-section-number">4.4</span> 累積値の計算</a></li>
</ul></li>
<li><a href="#繰返し構文のネスト" id="toc-繰返し構文のネスト"><span
class="toc-section-number">5</span> 繰返し構文のネスト</a>
<ul>
<li><a href="#応用例1" id="toc-応用例1"><span
class="toc-section-number">5.1</span> 応用例1</a></li>
<li><a href="#応用例2" id="toc-応用例2"><span
class="toc-section-number">5.2</span> 応用例2</a></li>
</ul></li>
<li><a href="#数学に基づく計算-v.s.-pgによるゴリ押し計算"
id="toc-数学に基づく計算-v.s.-pgによるゴリ押し計算"><span
class="toc-section-number">6</span> 数学に基づく計算 v.s.
PGによるゴリ押し計算</a>
<ul>
<li><a href="#計算の正確度を比較" id="toc-計算の正確度を比較"><span
class="toc-section-number">6.1</span> 計算の正確度を比較</a></li>
<li><a href="#計算時間を比較" id="toc-計算時間を比較"><span
class="toc-section-number">6.2</span> 計算時間を比較</a></li>
</ul></li>
</ul> 
        <!-- ---------------------------------------- -->
      </div>
    </nav>

    <header class="markdown-body">
      <p>2025-2I プログラミング1 第07回 講義資料</p>
      <p>2025年05月29日（木）5・6時限</p>
    </header>

    <main class="markdown-body">
      <!-- ---------------------------------------- -->
      <h1 data-number="1" id="準備と講義概要"><span
      class="header-section-number">1</span> 準備と講義概要</h1>
      <ul>
      <li><a
      href="https://colab.research.google.com/?hl=ja">GoogleColab</a>
      にログインしておいてください。
      <ul>
      <li><code>PG1-第07回講義.ipynb</code>
      という名前で「GoogleColabノートブック」を作成しておいてください。</li>
      <li>本日の演習の<strong>解答例</strong>は<a
      href="https://colab.research.google.com/drive/1oHrEBEoSDFkxhrqgqN9uRUAzSC2SBBDJ?usp=sharing">こちら</a>を参照してください。</li>
      </ul></li>
      <li>今回の講義では「数学計算に関する処理」と「繰り返し構文
      (ループ変数の参照)」について学びます。これらを学ぶことで、タートルグラフィックスと組み合わせて次のような画像が描画できるようになります。</li>
      </ul>
      <figure>
      <img src="figs/07/matrix1.svg" alt="matrix" />
      <figcaption aria-hidden="true">matrix</figcaption>
      </figure>
      <figure>
      <img src="figs/07/error.svg" alt="ERROR-LOGO" />
      <figcaption aria-hidden="true">ERROR-LOGO</figcaption>
      </figure>
      <h1 data-number="2" id="mathライブラリ"><span
      class="header-section-number">2</span> Mathライブラリ</h1>
      <p>繰り返し構文 (ループ変数), 数学計算 各種数学の計算には
      <strong><em>mathライブラリ</em></strong> を利用します。</p>
      <p>プログラムのなかで「mathライブラリ」を使用するためには、次のようにインポートが必要です。</p>
      <div class="sourceCode" id="cb1"
      data-caption="mathライブラリのインポート.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> math  <span class="co"># 要インポート</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="bu">print</span>(<span class="ss">f&#39;円周率は </span><span class="sc">{</span>math<span class="sc">.</span>pi<span class="sc">:.5f}</span><span class="ss"> です&#39;</span>)</span></code></pre></div>
      <p>特に、次の定数や関数は <strong>利用頻度が高い</strong>
      ため覚えておいてください。</p>
      <ul>
      <li><strong>円周率</strong> <span
      class="math inline">\(\pi\)</span> (定数値)
      <ul>
      <li><code>math.pi # -&gt; 3.141592</code></li>
      </ul></li>
      <li>弧度法を<strong>度数法に変換</strong> (rad <span
      class="math inline">\(\to\)</span> deg)
      <ul>
      <li><span class="math inline">\(0.5\pi = 90^{\circ}\)</span></li>
      <li><code>math.degrees(0.5*math.pi) # -&gt; 90.0</code></li>
      </ul></li>
      <li>度数法を<strong>弧度法に変換</strong> (deg <span
      class="math inline">\(\to\)</span> rad)
      <ul>
      <li><span class="math inline">\(-180^{\circ} = -\pi\)</span></li>
      <li><code>math.radians(-180) # -&gt; -3.1415...</code></li>
      </ul></li>
      <li><strong>階乗</strong> <span class="math inline">\(n!\)</span>
      <ul>
      <li><span class="math inline">\(5!=5\times 4\times 3\times 2\times
      1\)</span> … <code>math.factorial(5) # -&gt; 120</code></li>
      </ul></li>
      <li><strong>組み合わせの総数</strong> <span
      class="math inline">\(_{n}\mathrm{C}_{r}\)</span>
      <ul>
      <li><span class="math inline">\(n\)</span> 個の異なるものから
      <span class="math inline">\(r\)</span>
      個を選ぶ「組み合わせ」の総数</li>
      <li><span class="math inline">\(_{3}\mathrm{C}_{2}\)</span> …
      <code>math.comb(3,2) # -&gt; 3</code></li>
      <li><span class="math inline">\(_{7}\mathrm{C}_{2}\)</span> …
      <code>math.comb(7,2) # -&gt; 21</code></li>
      <li><span class="math inline">\(_{8}\mathrm{C}_{5}\)</span> …
      <code>math.comb(8,5) # -&gt; 56</code></li>
      </ul></li>
      </ul>
      <p>このほかにも、mathモジュールには様々な関数が存在します。それらの一覧や詳細は
      <a
      href="https://docs.python.org/ja/3/library/math.html">リファレンス</a>
      で確認してください。</p>
      <div class="note type-tips">
      <p><strong>組み合せ数の総数の求め方</strong></p>
      <p><span class="math inline">\(n\)</span> 個の異なるものから <span
      class="math inline">\(r\)</span> 個を選ぶ「組み合わせ」の総数
      <span class="math inline">\(_{n}\mathrm{C}_{r}\)</span>
      は、1年次の「<strong>基礎数学B</strong>」で学習済みですが、次のように計算できます。</p>
      <p><span class="math display">\[ {}_{n}\mathrm{C}_{r} =
      \frac{n!}{r!(n-r)!}  \]</span></p>
      <p>なお、上記の式はTeX (テキストセルで有効) では
      <code>$$ {}_{n}\mathrm{C}_{r} = \frac{n!}{r!(n-r)!}  $$</code>
      のように表記します。</p>
      </div>
      <h2 data-number="2.1" id="演習1-目標時間-12分"><span
      class="header-section-number">2.1</span> 演習1
      (<i class="fa-solid fa-stopwatch"></i> 目標時間: 12分)</h2>
      <p>確率 <span class="math inline">\(p\)</span> の事象が、<span
      class="math inline">\(n\)</span> 回の試行で <span
      class="math inline">\(k\)</span> 回発生する確率 <span
      class="math inline">\(P\)</span> について、次式 (二項分布)
      で計算できることが数学的に知られています。二項分布は、4年次の「<strong>確率統計</strong>」の授業で学びますが、高専2年でも十分に理解できる内容なので興味がある人は<a
      href="https://www.youtube.com/results?search_query=二項分布">YouTube動画</a>などで学んでください
      。</p>
      <p><span class="math display">\[  P={}_{n} \mathrm{C}_{k} \cdot
      p^{k}\cdot(1-p)^{n-k}\]</span></p>
      <p>例えば「<strong>あたり</strong>」の割合が <span
      class="math inline">\(15\%\)</span> のクジを <span
      class="math inline">\(5\)</span> 回引いたときに、<span
      class="math inline">\(1\)</span>
      回だけ「<strong>あたり</strong>」がでる確率 <span
      class="math inline">\(P_{1}\)</span> は、<span
      class="masked"><span class="math inline">\(n=5\)</span>、<span
      class="math inline">\(k=1\)</span>、<span
      class="math inline">\(p=0.15\)</span></span>として上式に代入して、次のように計算できます。</p>
      <p><span class="math display">\[  P_{1}={}_{5} \mathrm{C}_{1}
      \cdot 0.15^{1}\cdot(1-0.15)^{5-1} \fallingdotseq
      0.392\]</span></p>
      <p>同様に、<span class="math inline">\(2\)</span>
      回だけ「<strong>あたり</strong>」がでる確率 <span
      class="math inline">\(P_{2}\)</span>
      は次のように計算できます。</p>
      <p><span class="math display">\[ P_{2}={}_{5} \mathrm{C}_{2} \cdot
      0.15^{2}\cdot(1-0.15)^{5-2} \fallingdotseq 0.138\]</span></p>
      <p>また、「<span class="math inline">\(1\)</span> 回 あるいは
      <span class="math inline">\(2\)</span>
      回」の「<strong>あたり</strong>」がでる確率は <span
      class="masked"><span
      class="math inline">\(P_{1}+P_{2}\)</span></span>
      のように計算できます。</p>
      <p>以上を踏まえて、以下の問題についてPythonプログラムを使って解いてください。</p>
      <hr>
      <p>あるスマホゲームのガチャにおいて「<strong>メタスラの剣</strong>」というアイテムの提供割合（排出率）は
      <span class="math inline">\(0.5\%\)</span> となっている。<span
      class="math inline">\(1\)</span> 回のガチャには <span
      class="math inline">\(300\)</span> ジェムが必要である。また <span
      class="math inline">\(10,000\)</span> 円で <span
      class="math inline">\(11,720\)</span> ジェムが購入できる。</p>
      <ul>
      <li><strong>問1</strong>：ガチャを <span
      class="math inline">\(100\)</span> 回やって「メタスラの剣」が
      <strong>1本も入手できない確率</strong> (<span
      class="math inline">\(\%\)</span>) を計算してください。
      <ul>
      <li><strong>ヒント</strong>：「<strong>1本も入手できない確率</strong>」とは、言い換えれば「<span
      class="masked">0</span>本入手できる確率」と同義です。</li>
      <li><strong>答え</strong>： <span class="masked"><span
      class="math inline">\(60.58\%\)</span></span></li>
      </ul></li>
      </ul>
      <div class="note type-caution">
      <p><strong>注意</strong></p>
      <p>計算式に対して直接的に「数値
      (数値リテラル)」を組み込まないでください。<strong>計算式は「変数」を使って構成し、数値は「変数」に対して与えるようにしてください</strong>。</p>
      <div class="sourceCode" id="cb2"
      data-caption="好ましくないアプローチ.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="im">import</span> math</span>
<span id="cb2-3"><a href="#cb2-3"></a>p1 <span class="op">=</span> math.comb(<span class="dv">100</span>,<span class="dv">0</span>) <span class="op">*</span> <span class="fl">0.005</span><span class="op">**</span><span class="dv">0</span> <span class="op">*</span> (<span class="dv">1</span><span class="op">-</span><span class="fl">0.005</span>)<span class="op">**</span>(<span class="dv">100</span><span class="op">-</span><span class="dv">0</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="bu">print</span>(<span class="ss">f&#39;問1 </span><span class="sc">{</span>p1<span class="sc">:.2%}</span><span class="ss">&#39;</span>)  <span class="co"># .2% → 小数第2位までの百分率の書式指定子</span></span></code></pre></div>
      <div class="sourceCode" id="cb3"
      data-caption="好ましいアプローチ.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="im">import</span> math</span>
<span id="cb3-3"><a href="#cb3-3"></a>p <span class="op">=</span> <span class="fl">0.005</span> <span class="co"># 排出率</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>n <span class="op">=</span> <span class="dv">100</span>   <span class="co"># 挑戦回数</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>k <span class="op">=</span> <span class="dv">0</span>     <span class="co"># 入手数</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>p1 <span class="op">=</span> math.comb(n,k) <span class="op">*</span> p<span class="op">**</span>k <span class="op">*</span> (<span class="dv">1</span><span class="op">-</span>p)<span class="op">**</span>(n<span class="op">-</span>k)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="bu">print</span>(<span class="ss">f&#39;問1 </span><span class="sc">{</span>p1<span class="sc">:.2%}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <p>なお、f文字列の「書式指定子」に <code>%</code>
      が存在することは既に<a
      href="lecture03.html#出力の書式指定">学習済み</a>です。例えば
      <code>print(f'p={0.1519:.1%}')</code> は <code>p=15.2%</code>
      を出力します。</p>
      </div>
      <ul>
      <li><strong>問2</strong>：ガチャを <span
      class="math inline">\(100\)</span> 回やって「メタスラの剣」が
      <strong>1本以上入手できる確率</strong> (<span
      class="math inline">\(\%\)</span>) を計算してください。
      <ul>
      <li><strong>ヒント</strong>：「1本以上入手できる確率」とは、言い換えれば「<strong>1本入手できる確率
      + 2本入手できる確率 + … + 99本入手できる確率 +
      100本入手できる確率</strong>」ですが、それを計算するのは愚かなので…。</li>
      <li><strong>答え</strong>：<span class="masked"><span
      class="math inline">\(39.42\%\)</span></span></li>
      </ul></li>
      <li><strong>問3</strong>：<span class="math inline">\(100\)</span>
      人が挑戦したとき、「メタスラの剣」が<strong>1本も入手できない人</strong>は
      (確率計算上では) 何人でてくるか計算してください。
      <ul>
      <li><strong>答え</strong>：<span class="masked">約 <span
      class="math inline">\(61\)</span> 人</span></li>
      </ul></li>
      <li><strong>問4</strong>：<span class="math inline">\(100\)</span>
      回のガチャに挑戦するときに必要な金額 (日本円)
      はいくらか計算してください。
      <ul>
      <li><strong>答え</strong>：<span class="masked">約 <span
      class="math inline">\(25,597\)</span> 円</span></li>
      </ul></li>
      </ul>
      <p>余裕がある学生は、前回講義で学習した<a
      href="lecture04.html#計算式をテストするとき">GoogleColabのフォーム機能</a>を利用して、UI
      (User Interface) / UX (User Experience)
      を強化したバージョンを作成してみてください。</p>
      <h1 data-number="3" id="組込み関数-数学系"><span
      class="header-section-number">3</span> 組込み関数 (数学系)</h1>
      <p><strong><em>組み込み関数</em></strong>とは、<code>import</code>
      の宣言をせずに利用できる関数で「<strong>標準関数</strong>」や「<strong>ビルトイン関数</strong>」とも呼ばれます。既に何度も利用している
      <code>print</code> や <code>input</code>
      は組み込み関数になります。</p>
      <p>ここでは、利用頻度が高い <strong>数学系</strong>
      の組み込み関数について記載します。</p>
      <ul>
      <li><strong>絶対値</strong>の計算
      <ul>
      <li><code>abs(-37564) # -&gt; 37564</code></li>
      <li><code>abs(-10.9) # -&gt; 10.9</code></li>
      </ul></li>
      <li>大きい値の取得
      <ul>
      <li><code>max(55,100) # -&gt; 100</code></li>
      <li><code>max(-55.5,-40.2,-75,-25) # -&gt; -25</code></li>
      </ul></li>
      <li><strong>四捨五入</strong>の計算
      <ul>
      <li><code>round(15.863) # -&gt; 16</code></li>
      <li><code>round(15.863,1) # -&gt; 15.9</code><br />
      </li>
      </ul></li>
      <li><strong>べき乗</strong>の計算
      <ul>
      <li><code>pow(4,3) -&gt; 64</code>
      <ul>
      <li>「**演算子」を使って <code>4**3</code>
      とするほうが一般的です。</li>
      </ul></li>
      <li><code>pow(38,-1,97)</code> <strong>モジュラ逆数の計算</strong>
      ( RSA暗号 (情報2の第09回講義で学びます) に関する計算などで使用 )
      <ul>
      <li><span
      class="math inline">\((x\times38)\  \mathrm{mod}\  97=1\)</span>
      となる <span class="math inline">\(x\)</span> を求める計算 (<span
      class="math inline">\(\mathrm{mod}\)</span> は Pythonの
      <code>%</code> 演算子に相当する計算)</li>
      </ul></li>
      </ul></li>
      </ul>
      <p>このほかにも、様々な組み込み関数が存在します。それらの詳細は <a
      href="https://docs.python.org/ja/3/library/functions.html">リファレンス</a>
      で確認してください。</p>
      <h2 data-number="3.1" id="とても重要なこと"><span
      class="header-section-number">3.1</span>
      とても重要なこと<i class="fa-solid fa-triangle-exclamation"></i></h2>
      <p>「教わったこと」を<strong>教わった範囲で無条件に受け入れて終わるのではなく</strong>
      <span
      class="masked">好奇心や興味関心を持って、発展的に「試す」「調べる」「考える」に取り組めるように</span>
      なってください。
      例えば、次のような「<strong>疑問</strong>」や「<strong>興味</strong>」が湧いて、それに対して「<strong>試す</strong>」「<strong>調べる</strong>」「<strong>考える</strong>」ができるようになってください。</p>
      <p>このような習慣が身に付いた人が、結果的に (4年生になる頃には)
      高いプログラミングスキルを習得しています。</p>
      <ul>
      <li><code>round</code> の第2引数に <span
      class="masked">マイナスの値 (例えば <code>round(15.863,-1)</code>
      ) を設定するとどうなるのか</span>。</li>
      <li><code>max</code> という組み込み関数が存在するのなら <span
      class="masked">同様に <code>min</code>
      という関数も存在するのではないか。とりえず
      <code>min(55,100)</code> を試してみよう。</span></li>
      <li>例示では <code>max</code> の引数に「数値」を与えていたけど
      <span
      class="masked">文字列を与えるとどうなるのか。実行時エラー?。それとも、文字数が多いほうを返す?。それとも・・・</span>。</li>
      </ul>
      <h1 data-number="4"
      id="繰り返し構文におけるループ変数の参照"><span
      class="header-section-number">4</span>
      繰り返し構文におけるループ変数の参照</h1>
      <p>次のような <strong><em>C/C++言語プログラム</em></strong>
      をコンパイルして実行すると…</p>
      <div class="sourceCode" id="cb4"
      data-caption="0から4を出力するC言語プログラム.c"><pre
      class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">// これはC/C++言語のプログラムです。</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="pp">#include</span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>main<span class="op">(){</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">5</span><span class="op">;</span> i<span class="op">++){</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>    printf<span class="op">(</span><span class="st">&quot;i=</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span>i<span class="op">);</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="op">}</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="op">}</span></span></code></pre></div>
      <p>次のような出力を得ることができます。</p>
      <pre><code>i=0
i=1
i=2
i=3
i=4</code></pre>
      <hr />
      <p>一方で、Pythonでは
      <strong>次のようなプログラムで同様の出力</strong>
      を得ることができます。Colab.ノートブックに貼り付けて、実際に同じ出力が得られることを確認してください。</p>
      <div class="sourceCode" id="cb6"
      data-caption="0から4を出力するPythonプログラム.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="bu">print</span>(<span class="ss">f&#39;i=</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <p>ここで、変数 <code>i</code> を <span
      class="masked">「ループ変数」や「ループカウンタ」</span>
      と言います。<code>range(5)</code> のとき、<code>i</code>
      はループ毎に
      <code>0</code>、<code>1</code>、<code>2</code>、<code>3</code>、<code>4</code>
      に変化します。</p>
      <p><strong>ゼロオリジン</strong> (ゼロから開始、zero-based)
      であるため <span
      class="masked">最終値が「<code>5</code>」ではなく「<code>4</code>」になる点</span>
      に注意してください。</p>
      </div>
      <h2 data-number="4.1" id="ループ変数の参照"><span
      class="header-section-number">4.1</span> ループ変数の参照</h2>
      <p>ループ変数は、繰返し構文の内部で <span class="masked">参照して
      (=読み取りして) 計算式に利用</span> したり、<span
      class="masked">関数の引数に与えたり</span>
      することができます。</p>
      <div class="sourceCode" id="cb7"
      data-caption="ループ変数を利用したプログラム.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="im">import</span> math</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb7-4"><a href="#cb7-4"></a>  a <span class="op">=</span> i <span class="op">+</span> <span class="dv">5</span>         <span class="co"># ループ変数 i を計算式に利用</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  b <span class="op">=</span> math.sqrt(i)  <span class="co"># ループ変数 i を関数の引数に利用</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="bu">print</span>(<span class="ss">f&#39;i=</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">, i+5=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">, sqrt</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">=</span><span class="sc">{</span>b<span class="sc">:.2f}</span><span class="ss">&#39;</span>) <span class="co"># i+5 を出力</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="bu">print</span>(<span class="st">&#39;---&#39;</span>)    <span class="co"># for終了</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="bu">print</span>(<span class="ss">f&#39;i=</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># for終了後も参照可能(最終値が格納されている)</span></span></code></pre></div>
      <p>実行結果は、次のようになります。</p>
      <pre><code>i=0, i+5=5, sqrt0=0.00
i=1, i+5=6, sqrt1=1.00
i=2, i+5=7, sqrt2=1.41
i=3, i+5=8, sqrt3=1.73
i=4, i+5=9, sqrt4=2.00
---
i=4</code></pre>
      <p>ループを抜けた後も、<strong>第08行目</strong> のように <span
      class="masked">変数 <code>i</code> が参照 (読み取り)
      できること</span> に注意してください。</p>
      <h3 data-number="4.1.1" id="演習2-目標時間-5分"><span
      class="header-section-number">4.1.1</span> 演習2
      (<i class="fa-solid fa-stopwatch"></i> 目標時間: 5分)</h3>
      <p>次のような標準出力を得たいとします。</p>
      <pre><code>X座標 : -4
X座標 : -3
X座標 : -2
X座標 : -1
X座標 :  0
X座標 :  1
X座標 :  2
X座標 :  3
X座標 :  4</code></pre>
      <p>次のプログラムの <strong>第02行目</strong> と
      <strong>第04行目</strong> を書き換えることで対応してください。</p>
      <p>まずは <span
      class="masked">以下のプログラムを、そのまま実行して動作確認してから</span>、そのあとに書き換えに取り組んでください。</p>
      <div class="sourceCode" id="cb10"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb10-2"><a href="#cb10-2"></a>n <span class="op">=</span> <span class="dv">5</span>   <span class="co"># ここを書き換え</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb10-4"><a href="#cb10-4"></a>  x <span class="op">=</span> i <span class="co"># ここを書き換え</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="bu">print</span>(<span class="ss">f&#39;X座標 : </span><span class="sc">{</span>x<span class="sc">:&gt;2}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <ul>
      <li><strong>補足</strong>: <strong>第05行目</strong> の
      <strong>書式指定子</strong> <code>{x:&gt;2}</code>
      は「<strong>出力幅2 (右詰め・不足分は空白埋め)
      </strong>」を意味します。</li>
      <li><strong>補足</strong>: <code>range</code>
      の引数に手を加えて対応する方法もありますが、ここでは、その方法を使わずに目的の出力を得る方法を考えてみましょう。</li>
      </ul>
      <p>演習が完了したら、次のプログラムでも同等の結果が得られることを確認してください。</p>
      <div class="sourceCode" id="cb11"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb11-2"><a href="#cb11-2"></a>n <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="op">-</span>n,n<span class="op">+</span><span class="dv">1</span>): <span class="co"># ◀ ここがポイント</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="bu">print</span>(<span class="ss">f&#39;X座標 : </span><span class="sc">{</span>i<span class="sc">:&gt;2}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <h3 data-number="4.1.2" id="演習3-目標時間-9分"><span
      class="header-section-number">4.1.2</span> 演習3
      (<i class="fa-solid fa-stopwatch"></i> 目標時間: 9分)</h3>
      <p>非負の整数値を格納する変数 <code>n</code> の値が <span
      class="math inline">\(N\)</span> のとき、<span
      class="math inline">\(-N\)</span>、<span
      class="math inline">\(-N+1\)</span>、<span
      class="math inline">\(\cdots\)</span>、<span
      class="math inline">\(0\)</span>、<span
      class="math inline">\(\cdots\)</span>、<span
      class="math inline">\(N-1\)</span>、<span
      class="math inline">\(N\)</span>
      のような数列を得るようなプログラムを作成してください。</p>
      <p>例えば、<code>n</code> が <span
      class="math inline">\(3\)</span>
      のときは次のような文字列を出力します。1文字のスペース区切り、<strong>正の値にはプラスの符号</strong>がついている、ゼロには符号を付けない点に注意してください。</p>
      <pre><code>-3 -2 -1 0 +1 +2 +3</code></pre>
      <p>例えば、<code>n</code> が <span
      class="math inline">\(5\)</span>
      のときは次のような文字列を出力します。</p>
      <pre><code>-5 -4 -3 -2 -1 0 +1 +2 +3 +4 +5</code></pre>
      <p>次のプログラムに追記する形式で作成してください。</p>
      <div class="sourceCode" id="cb14"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co">#@markdown 0より大きい整数値を与えてください </span></span>
<span id="cb14-3"><a href="#cb14-3"></a>n <span class="op">=</span> <span class="dv">3</span>    <span class="co">#@param {type:&quot;slider&quot;, min:1, max:20, step:1}</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># ここから先のコードを記述</span></span></code></pre></div>
      <ul>
      <li><strong>ヒント</strong>: <a
      href="lecture06.html#条件分岐構文">前回講義</a>で学んだ条件分岐構文
      (if文) を利用してください (無論、それ以外の方法もあります) 。</li>
      <li><strong>中級者向けの指示</strong>: <span
      class="masked">最終値のあとにスペースが付加されないように</span>
      してください。</li>
      <li><strong>補足</strong>: 02行目と03行目は
      <strong><em>フォーム機能</em></strong> を利用している (<a
      href="lecture03.html">第03回講義</a>で学習済み) 。</li>
      </ul>
      <h2 data-number="4.2" id="等差数列の生成"><span
      class="header-section-number">4.2</span> 等差数列の生成</h2>
      <p>初項 <span class="math inline">\(a\)</span>、公差 <span
      class="math inline">\(d\)</span> の<strong>等差数列</strong>の第
      <span class="math inline">\(1\)</span> 項から第 <span
      class="math inline">\(n\)</span>
      項は、次のプログラムで生成することができます。</p>
      <div class="sourceCode" id="cb15"
      data-caption="第n項までの等差数列を出力するプログラム.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb15-2"><a href="#cb15-2"></a>a <span class="op">=</span> <span class="dv">3</span>  <span class="co"># 初項</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>d <span class="op">=</span> <span class="dv">4</span>  <span class="co"># 公差</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>n <span class="op">=</span> <span class="dv">8</span>  <span class="co"># 第n項まで出力</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="bu">print</span>( a<span class="op">+</span>d<span class="op">*</span>i ,end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span></code></pre></div>
      <p>実行結果は以下のようになります。</p>
      <pre><code>3 7 11 15 19 23 27 31 </code></pre>
      <p>ループ変数 <code>i</code> はゼロオリジン (最初の値が <span
      class="math inline">\(0\)</span> である)
      ため、<strong>数学の教科書に記載されているような式
      (1オリジン、one-based)
      を参考にする場合は読み替えが必要</strong>です。</p>
      <div class="note type-tips">
      <p><strong>数学の教科書に記載されている等差数列の一般項</strong></p>
      <p><span class="math display">\[ a_{n} = a_{1} + (n-1)d
      \]</span></p>
      </div>
      <h3 data-number="4.2.1" id="フォーム機能を使用して整形"><span
      class="header-section-number">4.2.1</span>
      フォーム機能を使用して整形</h3>
      <p>上記プログラムを <strong>Colab.のフォーム機能</strong>
      を使って整形・装飾したプログラム例を示します。Colab.ノートブックに貼り付けて実行してみてください。</p>
      <div class="sourceCode" id="cb17"
      data-caption="第n項までの等差数列を出力するプログラム(フォーム利用).py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co">#@markdown # **等差数列の出力** </span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co">#@markdown **初項** $a$ を入力してください。 </span></span>
<span id="cb17-4"><a href="#cb17-4"></a>a <span class="op">=</span> <span class="dv">3</span>  <span class="co"># @param {type:&quot;number&quot;}</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#@markdown **公差** $d$ を入力してください。 </span></span>
<span id="cb17-6"><a href="#cb17-6"></a>d <span class="op">=</span> <span class="dv">4</span>  <span class="co"># @param {type:&quot;number&quot;}</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#@markdown 第何項までの数列を出力するか設定してください。 </span></span>
<span id="cb17-8"><a href="#cb17-8"></a>n <span class="op">=</span> <span class="dv">8</span> <span class="co">#@param {type:&quot;slider&quot;, min:1, max:20, step:1}</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb17-10"><a href="#cb17-10"></a>  <span class="bu">print</span>( a<span class="op">+</span>d<span class="op">*</span>i ,end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span></code></pre></div>
      <figure>
      <img src="figs/07/colab-01.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="4.3" id="等比数列の生成"><span
      class="header-section-number">4.3</span> 等比数列の生成</h2>
      <p>初項 <span class="math inline">\(a\)</span>、公比 <span
      class="math inline">\(d\)</span> の<strong>等比数列</strong>の第
      <span class="math inline">\(1\)</span> 項から第 <span
      class="math inline">\(n\)</span>
      項は、次のプログラムで生成することができます。</p>
      <div class="sourceCode" id="cb18"
      data-caption="第n項までの等比数列をえるプログラム.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb18-2"><a href="#cb18-2"></a>a <span class="op">=</span> <span class="dv">3</span>  <span class="co"># 初項</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>r <span class="op">=</span> <span class="dv">2</span>  <span class="co"># 公比</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>n <span class="op">=</span> <span class="dv">8</span>  <span class="co"># 第n項まで出力</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb18-6"><a href="#cb18-6"></a>  <span class="bu">print</span>( a<span class="op">*</span>r<span class="op">**</span>i,end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span></code></pre></div>
      <p>実行結果は以下のようになります。</p>
      <pre><code>3 6 12 24 48 96 192 384 </code></pre>
      <p>等差数列と同様に、数学の教科書に記載されている式を利用する場合は「<strong>0オリジン</strong>」と「<strong>1オリジン</strong>」の違いに注意してください。以下は「微分積分1」の教科書に記載されている式です。</p>
      <p><span class="math display">\[ a_{n} = a \cdot r^{(n-1)}
      \]</span></p>
      <h3 data-number="4.3.1" id="演習4-目標時間-6分"><span
      class="header-section-number">4.3.1</span> 演習4
      (<i class="fa-solid fa-stopwatch"></i> 目標時間: 6分)</h3>
      <p>上記の<strong>等比数列生成プログラム</strong>を
      <strong>Colabのフォーム機能</strong>
      を使って整形・装飾したプログラムに変更してください
      (先に例として示した「等差数列」のフォーム対応プログラムをベースに作成してください)。また、その動作確認してください。</p>
      <h2 data-number="4.4" id="累積値の計算"><span
      class="header-section-number">4.4</span> 累積値の計算</h2>
      <p>for文は <strong>累積値</strong>
      を計算する場合にも利用されます。</p>
      <p>例えば、次式のように定義される <span
      class="math inline">\(S\)</span> は、</p>
      <p><span class="math display">\[ S = 1^2 + 2^2 +3^2 +4^2 + 5^2
      \]</span></p>
      <p>以下のようなプログラムで計算ができます。</p>
      <div class="sourceCode" id="cb20"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb20-2"><a href="#cb20-2"></a>S <span class="op">=</span> <span class="dv">0</span>  <span class="co"># 初期値0</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb20-4"><a href="#cb20-4"></a>  S <span class="op">=</span> S <span class="op">+</span> i<span class="op">**</span><span class="dv">2</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="bu">print</span>(<span class="ss">f&#39;S=</span><span class="sc">{</span>S<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <p>上記の <strong>第04行目</strong> の <code>S = S + i**2</code>
      は <span class="masked"><code>S += i**2</code></span>
      のように省略表記できます。</p>
      <p>なお <code>S =+ i**2</code>
      では意図した動作をしないので注意してください。<code>+=</code>
      のような演算子を「<strong>累算代入演算子</strong>」といいます。</p>
      <h3 data-number="4.4.1" id="演習5-目標時間-8分"><span
      class="header-section-number">4.4.1</span> 演習5
      (<i class="fa-solid fa-stopwatch"></i> 目標時間: 8分)</h3>
      <p>あるスマホゲームのガチャにおいて「<strong>URアイテム</strong>」の提供割合（排出率）は
      <span class="math inline">\(0.25\%\)</span> となっています。</p>
      <p><span class="math inline">\(300\)</span>
      回のガチャをしたとき、「<strong>URアイテム</strong>」の入手個数が
      <span class="math inline">\(0\)</span> 個の確率(<span
      class="math inline">\(\%\)</span>)、入手個数が <strong><span
      class="math inline">\(1\)</span> 個以上</strong>の確率(<span
      class="math inline">\(\%\)</span>)、<strong><span
      class="math inline">\(2\)</span> 個以上</strong>の確率(<span
      class="math inline">\(\%\)</span>)、<strong><span
      class="math inline">\(3\)</span> 個以上</strong>の確率(<span
      class="math inline">\(\%\)</span>)、<strong><span
      class="math inline">\(4\)</span> 個以上</strong>の確率(<span
      class="math inline">\(\%\)</span>) を求めてください。</p>
      <ul>
      <li><strong>ヒント</strong>
      <ul>
      <li><span class="math inline">\(1\)</span>
      個<strong>以上</strong>の確率 <span
      class="math inline">\(=\)</span> 全確率 (<span
      class="math inline">\(1.0\)</span>) <span
      class="math inline">\(-\)</span> <span
      class="math inline">\(0\)</span> 個入手の確率</li>
      <li><span class="math inline">\(2\)</span>
      個<strong>以上</strong>の確率 <span
      class="math inline">\(=\)</span> 全確率 (<span
      class="math inline">\(1.0\)</span>) <span
      class="math inline">\(-\)</span> ( <span
      class="math inline">\(0\)</span> 個入手の確率+ <span
      class="math inline">\(1\)</span> 個入手の確率 )</li>
      <li><span class="math inline">\(3\)</span>
      個<strong>以上</strong>の確率 <span
      class="math inline">\(=\)</span> 全確率 (<span
      class="math inline">\(1.0\)</span>) <span
      class="math inline">\(-\)</span> ( <span
      class="math inline">\(0\)</span> 個入手の確率+ <span
      class="math inline">\(1\)</span> 個入手の確率 + <span
      class="math inline">\(2\)</span> 個入手の確率 )
      <ul>
      <li>先に示した累積値の計算を利用します。</li>
      </ul></li>
      </ul></li>
      <li><strong>答え</strong>
      <ul>
      <li>入手個数が <span class="math inline">\(0\)</span> 個の確率
      <span class="masked"><span
      class="math inline">\(47.19\%\)</span></span></li>
      <li>入手個数が <span class="math inline">\(1\)</span> 個以上の確率
      <span class="masked"><span
      class="math inline">\(52.81\%\)</span></span></li>
      <li>入手個数が <span class="math inline">\(2\)</span> 個以上の確率
      <span class="masked"><span
      class="math inline">\(17.32\%\)</span></span></li>
      <li>入手個数が <span class="math inline">\(3\)</span> 個以上の確率
      <span class="masked"><span
      class="math inline">\(4.03\%\)</span></span></li>
      <li>入手個数が <span class="math inline">\(4\)</span> 個以上の確率
      <span class="masked"><span
      class="math inline">\(0.72\%\)</span></span></li>
      </ul></li>
      </ul>
      <h1 data-number="5" id="繰返し構文のネスト"><span
      class="header-section-number">5</span> 繰返し構文のネスト</h1>
      <p>条件分岐構文 (<code>if-elif-else</code>) と同様に、繰返し構文
      (<code>for</code>) についても<strong>ネスト (入れ子)
      が構成できます</strong>。このようなネストした繰返し構文を「<strong>多重ループ</strong>
      (2重ループ)」や「<strong>多重繰り返し文</strong>
      (2重繰返し文)」のようにいいます。</p>
      <p>例えば「掛け算の九九の表」は、次のように2重ループで出力できます。</p>
      <div class="sourceCode" id="cb21"
      data-caption="九九表を出力するプログラム.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="bu">print</span>(<span class="st">&#39;-&#39;</span><span class="op">*</span><span class="dv">27</span>)</span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</span>
<span id="cb21-5"><a href="#cb21-5"></a>    p <span class="op">=</span> (x<span class="op">+</span><span class="dv">1</span>) <span class="op">*</span> (y<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="bu">print</span>(<span class="ss">f&#39;</span><span class="sc">{</span>p<span class="sc">:&gt;2d}</span><span class="ss">&#39;</span>,end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb21-7"><a href="#cb21-7"></a>  <span class="bu">print</span>(<span class="st">&#39;&#39;</span>) <span class="co"># 1段ごとに改行</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="bu">print</span>(<span class="st">&#39;-&#39;</span><span class="op">*</span><span class="dv">27</span>)</span></code></pre></div>
      <p>実行すると次のような出力が得られます。</p>
      <pre><code>---------------------------
 1  2  3  4  5  6  7  8  9 
 2  4  6  8 10 12 14 16 18 
 3  6  9 12 15 18 21 24 27 
 4  8 12 16 20 24 28 32 36 
 5 10 15 20 25 30 35 40 45 
 6 12 18 24 30 36 42 48 54 
 7 14 21 28 35 42 49 56 63 
 8 16 24 32 40 48 56 64 72 
 9 18 27 36 45 54 63 72 81 
---------------------------</code></pre>
      <h2 data-number="5.1" id="応用例1"><span
      class="header-section-number">5.1</span> 応用例1</h2>
      <p><a href="lecture04.html#タートルグラフィックス">第04回講義</a>
      で利用した <strong>タートルグラフィックス (Turtle
      Graphics)</strong>
      を再び使用します。<strong>独立したコードセル</strong>を作成して、以下を実行してください。これは、接続している仮想マシン
      (Linux) に「ColabTurtle」というPythonモジュール (ライブラリ)
      をインストールするコマンドになります。</p>
      <pre><code>!pip install ColabTurtle</code></pre>
      <p>Colab.の場合、インストールしたライブラリは、ウェブブラウザと仮想マシンと接続が切れると、仮想マシンと共に破棄されます
      (再度、Colab.ノートブックを開いたときは、再度、上記コマンドを実行する必要があります)
      。</p>
      <div class="note type-tips">
      <p><strong>pip install とは</strong> (ChatGPT先生に聞いてみた)</p>
      <p><code>pip install</code>
      はPythonのプログラミングツールのコマンドです。これを使うと、特定の機能を持つコードの集まり（ライブラリと呼ばれる）をダウンロードしてPythonプログラムのなかで利用できるようにすることができます。例えば
      <code>pip install pandas</code> とすると、データ分析に使われる
      pandas というライブラリをインストールできます。つまり
      <code>pip install</code>
      は、Pythonで新しい機能を手軽に追加するための道具として使用されます。</p>
      </div>
      <p>多重ループを利用して、次のような<strong>ドットマトリクス</strong>を描画してみます。</p>
      <figure>
      <img src="figs/07/matrix1.svg" alt="matrix" />
      <figcaption aria-hidden="true">matrix</figcaption>
      </figure>
      <p>次のプログラムをColab.ノートブックに貼り付けて、実行してください。</p>
      <div class="sourceCode" id="cb24"
      data-caption="ドットマトリックスの描画.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="im">import</span> ColabTurtle.Turtle <span class="im">as</span> t</span>
<span id="cb24-3"><a href="#cb24-3"></a></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="co"># 初期設定</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>w, h <span class="op">=</span> <span class="dv">400</span>,<span class="dv">200</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>t.initializeTurtle(initial_speed<span class="op">=</span><span class="dv">13</span>,initial_window_size<span class="op">=</span>(w,h))</span>
<span id="cb24-7"><a href="#cb24-7"></a>t.shape(<span class="st">&#39;circle&#39;</span>)<span class="op">;</span>t.hideturtle()<span class="op">;</span>t.bgcolor(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb24-8"><a href="#cb24-8"></a>t.width(<span class="dv">12</span>) <span class="co"># 軌跡幅(ペンの太さ)</span></span>
<span id="cb24-9"><a href="#cb24-9"></a></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co"># 2重繰り返し(2重ループ)</span></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">19</span>):</span>
<span id="cb24-12"><a href="#cb24-12"></a>  <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</span>
<span id="cb24-13"><a href="#cb24-13"></a>    <span class="co"># 色設定 RGB</span></span>
<span id="cb24-14"><a href="#cb24-14"></a>    t.color(<span class="dv">255</span><span class="op">-</span>x<span class="op">*</span><span class="dv">10</span>, <span class="dv">255</span><span class="op">-</span>y<span class="op">*</span><span class="dv">25</span>, <span class="dv">100</span>)</span>
<span id="cb24-15"><a href="#cb24-15"></a>    <span class="co"># 点描画（現在位置から現在位置に移動軌跡を描く）</span></span>
<span id="cb24-16"><a href="#cb24-16"></a>    t.up()<span class="op">;</span>   t.goto(x<span class="op">*</span><span class="dv">20</span><span class="op">+</span><span class="dv">20</span>,y<span class="op">*</span><span class="dv">20</span><span class="op">+</span><span class="dv">20</span>)</span>
<span id="cb24-17"><a href="#cb24-17"></a>    t.down()<span class="op">;</span> t.goto(x<span class="op">*</span><span class="dv">20</span><span class="op">+</span><span class="dv">20</span>,y<span class="op">*</span><span class="dv">20</span><span class="op">+</span><span class="dv">20</span>)</span></code></pre></div>
      <p>ColabTurtleの詳細は、<a
      href="https://github.com/tolgaatam/ColabTurtle">こちら</a>
      を参照してください。</p>
      <h3 data-number="5.1.1" id="演習6-目標時間-8分"><span
      class="header-section-number">5.1.1</span> 演習6
      (<i class="fa-solid fa-stopwatch"></i> 目標時間: 8分)</h3>
      <p>上記の <code>ドットマトリックスの描画.py</code>
      を書き換えて、次のようなドットマトリクスを描画してください。明るい赤は
      <code>t.color(255,0,0)</code> で、暗い赤は
      <code>t.color(100,0,0)</code> で色設定ができます。</p>
      <figure>
      <img src="figs/07/matrix2.svg" alt="matrix" />
      <figcaption aria-hidden="true">matrix</figcaption>
      </figure>
      <ul>
      <li><strong>ヒント</strong>:
      2重ループの内部で条件分岐構文を利用します。ゼロオリジンで考えて、0行目では3列目以降が暗い赤。1行目では5列目以降が暗い赤。2行目では7列目以降が暗い赤。では、y行目では何列目以降を暗い赤にすべきか?
      → <span class="masked"><span
      class="math inline">\(2*y+3\)</span></span></li>
      </ul>
      <h2 data-number="5.2" id="応用例2"><span
      class="header-section-number">5.2</span> 応用例2</h2>
      <p>多重ループを使うことで、次ようなサイバーなロゴを描くこともできます。</p>
      <figure>
      <img src="figs/07/error.svg" alt="ERROR-LOGO" />
      <figcaption aria-hidden="true">ERROR-LOGO</figcaption>
      </figure>
      <p>上記を描くためのプログラムは以下のようになります。</p>
      <p><strong>同心多角形</strong>の描画の観点では<strong>第34行目がポイント</strong>となります
      (1年の「基礎数学」で学んだ三角関数の実用例です。例えば、<strong>第34行目</strong>を
      <code>t.goto(cx-r/2,cy+r/2)</code> に書き換えると
      (実際に試してみて!)
      美しい同心多角形にならないことが分かると思います) 。</p>
      <div class="sourceCode" id="cb25"
      data-caption="同心多角形の描画"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="im">import</span> math</span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="im">import</span> ColabTurtle.Turtle <span class="im">as</span> t</span>
<span id="cb25-4"><a href="#cb25-4"></a></span>
<span id="cb25-5"><a href="#cb25-5"></a>n<span class="op">=</span><span class="dv">6</span>  <span class="co"># N角形</span></span>
<span id="cb25-6"><a href="#cb25-6"></a>r<span class="op">=</span><span class="dv">50</span> <span class="co"># 一片の長さ</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>cx,cy <span class="op">=</span> <span class="dv">250</span>,<span class="dv">200</span> <span class="co"># 中心座標</span></span>
<span id="cb25-8"><a href="#cb25-8"></a></span>
<span id="cb25-9"><a href="#cb25-9"></a><span class="co"># 初期設定</span></span>
<span id="cb25-10"><a href="#cb25-10"></a>t.initializeTurtle(initial_speed<span class="op">=</span><span class="dv">13</span>,initial_window_size<span class="op">=</span>(cx<span class="op">*</span><span class="dv">2</span>,cy<span class="op">*</span><span class="dv">2</span>))</span>
<span id="cb25-11"><a href="#cb25-11"></a>t.shape(<span class="st">&#39;circle&#39;</span>)<span class="op">;</span>t.hideturtle()<span class="op">;</span>t.bgcolor(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb25-12"><a href="#cb25-12"></a></span>
<span id="cb25-13"><a href="#cb25-13"></a><span class="co"># N角形の外角を計算しておく</span></span>
<span id="cb25-14"><a href="#cb25-14"></a>deg <span class="op">=</span> <span class="dv">180</span><span class="op">-</span><span class="dv">360</span><span class="op">/</span>n</span>
<span id="cb25-15"><a href="#cb25-15"></a>rad <span class="op">=</span> math.radians(deg)</span>
<span id="cb25-16"><a href="#cb25-16"></a></span>
<span id="cb25-17"><a href="#cb25-17"></a><span class="co"># 色の初期値</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>red <span class="op">=</span> <span class="dv">255</span></span>
<span id="cb25-19"><a href="#cb25-19"></a>pen <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb25-20"><a href="#cb25-20"></a></span>
<span id="cb25-21"><a href="#cb25-21"></a><span class="co"># 文字</span></span>
<span id="cb25-22"><a href="#cb25-22"></a>t.color(red,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb25-23"><a href="#cb25-23"></a>t.up()</span>
<span id="cb25-24"><a href="#cb25-24"></a>t.goto(cx, cy<span class="op">+</span><span class="dv">6</span>)</span>
<span id="cb25-25"><a href="#cb25-25"></a>t.write(<span class="st">&#39;ERROR&#39;</span>,align<span class="op">=</span><span class="st">&#39;center&#39;</span>,font<span class="op">=</span>(<span class="dv">20</span>,<span class="st">&#39;Arial&#39;</span>,<span class="st">&#39;bold&#39;</span>))</span>
<span id="cb25-26"><a href="#cb25-26"></a></span>
<span id="cb25-27"><a href="#cb25-27"></a><span class="co"># 2重ループ</span></span>
<span id="cb25-28"><a href="#cb25-28"></a><span class="cf">for</span> p <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb25-29"><a href="#cb25-29"></a>  t.up()</span>
<span id="cb25-30"><a href="#cb25-30"></a>  t.width(pen)</span>
<span id="cb25-31"><a href="#cb25-31"></a>  t.color(red,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb25-32"><a href="#cb25-32"></a>  t.goto(cx, cy)</span>
<span id="cb25-33"><a href="#cb25-33"></a>  t.setheading(<span class="dv">0</span>) <span class="co"># 向きを0°(3時方向)に設定</span></span>
<span id="cb25-34"><a href="#cb25-34"></a>  t.goto(cx<span class="op">-</span>r<span class="op">/</span><span class="dv">2</span>,cy<span class="op">+</span>math.tan(rad<span class="op">/</span><span class="dv">2</span>)<span class="op">*</span>r<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb25-35"><a href="#cb25-35"></a>  t.down()<span class="op">;</span></span>
<span id="cb25-36"><a href="#cb25-36"></a></span>
<span id="cb25-37"><a href="#cb25-37"></a>  <span class="co"># N角形を描画</span></span>
<span id="cb25-38"><a href="#cb25-38"></a>  <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb25-39"><a href="#cb25-39"></a>    t.forward(r)</span>
<span id="cb25-40"><a href="#cb25-40"></a>    t.left(<span class="dv">180</span><span class="op">-</span>deg)<span class="op">;</span></span>
<span id="cb25-41"><a href="#cb25-41"></a></span>
<span id="cb25-42"><a href="#cb25-42"></a>  <span class="co"># 辺の長さと色を更新</span></span>
<span id="cb25-43"><a href="#cb25-43"></a>  r<span class="op">+=</span><span class="dv">18</span></span>
<span id="cb25-44"><a href="#cb25-44"></a>  red<span class="op">-=</span><span class="dv">25</span></span></code></pre></div>
      <h3 data-number="5.2.1" id="演習7"><span
      class="header-section-number">5.2.1</span> 演習7</h3>
      <p>美しく魅力的な画像を生成せよ。</p>
      <div class="sourceCode" id="cb26" data-caption="参考.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="im">import</span> ColabTurtle.Turtle <span class="im">as</span> t</span>
<span id="cb26-3"><a href="#cb26-3"></a></span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="co"># 初期設定</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>w, h <span class="op">=</span> <span class="dv">500</span>,<span class="dv">500</span></span>
<span id="cb26-6"><a href="#cb26-6"></a>t.initializeTurtle(initial_speed<span class="op">=</span><span class="dv">13</span>,initial_window_size<span class="op">=</span>(w,h))</span>
<span id="cb26-7"><a href="#cb26-7"></a>t.shape(<span class="st">&#39;circle&#39;</span>)<span class="op">;</span>t.hideturtle()<span class="op">;</span>t.bgcolor(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb26-8"><a href="#cb26-8"></a>t.width(<span class="dv">1</span>)</span>
<span id="cb26-9"><a href="#cb26-9"></a><span class="co"># 2重繰り返し(2重ループ)</span></span>
<span id="cb26-10"><a href="#cb26-10"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">40</span>):</span>
<span id="cb26-11"><a href="#cb26-11"></a>  t.up()<span class="op">;</span>   </span>
<span id="cb26-12"><a href="#cb26-12"></a>  t.goto(<span class="dv">20</span>,<span class="dv">10</span><span class="op">*</span>i<span class="op">+</span><span class="dv">20</span>)</span>
<span id="cb26-13"><a href="#cb26-13"></a>  t.down()<span class="op">;</span> </span>
<span id="cb26-14"><a href="#cb26-14"></a>  t.goto(<span class="dv">410</span><span class="op">-</span><span class="dv">10</span><span class="op">*</span>i,<span class="dv">20</span>)</span></code></pre></div>
      <h1 data-number="6"
      id="数学に基づく計算-v.s.-pgによるゴリ押し計算"><span
      class="header-section-number">6</span> 数学に基づく計算 v.s.
      PGによるゴリ押し計算</h1>
      <p>「<strong>微分積分1</strong>」の授業では、等比数列の第 <span
      class="math inline">\(1\)</span> 項から第 <span
      class="math inline">\(n\)</span> 項までの和 <span
      class="math inline">\(S_{n}\)</span>
      が、次式で計算できることを学びました
      (数学的な証明についても示されたはずです) 。</p>
      <p><span class="math display">\[ S_{n} = \frac{a(1-r^{n})}{1-r}=
      \frac{a(r^{n}-1)}{r-1}\]</span></p>
      <p>一方で、プログラムで繰返し構文を使った<strong>シンプルなゴリ押し計算</strong>でも
      <span class="math inline">\(S\)</span>
      を求めることができます。</p>
      <p>両者について<span
      class="masked">比較・考察</span>してみたいと思います。例として、初項
      <span class="math inline">\(a=16\)</span>、公比 <span
      class="math inline">\(r=-1/2\)</span> の初項 (第 <span
      class="math inline">\(1\)</span> 項) から第 <span
      class="math inline">\(50\)</span> 項までの和 <span
      class="math inline">\(S_{50}\)</span> を求めてみます。</p>
      <h2 data-number="6.1" id="計算の正確度を比較"><span
      class="header-section-number">6.1</span> 計算の正確度を比較</h2>
      <p>Colab.
      のノートブックを使って実際に、2つのプログラムを実行して、その結果を確認してみてください。</p>
      <div class="sourceCode" id="cb27"
      data-caption="method-1a.py (数学公式)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb27-2"><a href="#cb27-2"></a>a <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>r <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>n <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>S <span class="op">=</span> a<span class="op">*</span>(r<span class="op">**</span>n<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>(r<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="bu">print</span>(<span class="ss">f&#39;S = </span><span class="sc">{</span>S<span class="sc">:.20f}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <div class="sourceCode" id="cb28"
      data-caption="method-2a.py (繰返し計算)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb28-2"><a href="#cb28-2"></a>a <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>r <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>n <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>S <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb28-7"><a href="#cb28-7"></a>  S <span class="op">+=</span> a<span class="op">*</span>r<span class="op">**</span>i</span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="bu">print</span>(<span class="ss">f&#39;S = </span><span class="sc">{</span>S<span class="sc">:.20f}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <p>非常に小さな値ですが計算結果が違っていることが分かると思います。証明は省略しますが、数学公式を使って計算した結果のほうが正しい
      (正確な) 答えになります。</p>
      <p>プログラムでゴリ押し計算した値にズレが生じるのは「<strong>情報2</strong>」の授業で習ったように
      <strong><em>丸め誤差</em></strong> と
      <strong><em>桁落ち誤差</em></strong> の影響によるものです
      (情報2の講義ノートの p.76-77
      を参照)。公式を使った場合でも、それら誤差は避けられませんが、繰返し構文よって<strong>累積しない</strong>ため影響が小さく抑えられています。</p>
      <h2 data-number="6.2" id="計算時間を比較"><span
      class="header-section-number">6.2</span> 計算時間を比較</h2>
      <p>GoogelColab.では <code>%%timeit</code>
      というマジックコマンドを使って<strong>コードセル単位の実行時間を計測</strong>することができます。</p>
      <p><code>%%timeit</code>
      では、何回もコードセルを実行し、その実行時間の<strong>平均</strong>と<strong>標準偏差</strong>
      (=「情報1」で学習したように「ばらつき」の指標 )
      を出力します。そのため、<code>%%timeit</code> を使用する場合には
      <code>print</code>
      などの出力はコメントしておきます。また、<code>%reset -f</code>
      もコメントアウトしておきます。</p>
      <p>次のコードを Colab. に貼り付けて実行してみてください。</p>
      <div class="sourceCode" id="cb29" data-caption="method-1b.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="op">%%</span>timeit</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="co"># %reset -f</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>a <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>r <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>n <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>S <span class="op">=</span> a<span class="op">*</span>(r<span class="op">**</span>n<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>(r<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="co"># print(f&#39;S = {S:.20f}&#39;)</span></span></code></pre></div>
      <div class="sourceCode" id="cb30" data-caption="method-2b.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a><span class="op">%%</span>timeit</span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="co"># %reset -f</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>a <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>r <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span></span>
<span id="cb30-5"><a href="#cb30-5"></a>n <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>S <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb30-8"><a href="#cb30-8"></a>  S <span class="op">+=</span> a<span class="op">*</span>r<span class="op">**</span>i</span>
<span id="cb30-9"><a href="#cb30-9"></a><span class="co"># print(f&#39;S = {S:.20f}&#39;)</span></span></code></pre></div>
      <p>実行結果の一例を示します。これらの実行結果は、各自に割り当てられた<strong>仮想マシンのスペックに依存する</strong>ので注意してください。</p>
      <p>「method-1b.py」の実行結果</p>
      <pre><code>208 ns ± 9.64 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)</code></pre>
      <p>「method-2b.py」の実行結果</p>
      <pre><code>9.63 µs ± 3.1 µs per loop (mean ± std. dev. of 7 runs, 100000 loops each)</code></pre>
      <p>これは <span class="math inline">\(1,000,000\)</span>
      回のループを <span class="math inline">\(7\)</span>
      回実行したとき、その <span class="math inline">\(7\)</span>
      回の実行についての <strong>平均実行時間</strong> が <span
      class="math inline">\(208(\mathrm{ns})\)</span>
      で、その<strong>標準偏差</strong> が <span
      class="math inline">\(9.64(\mathrm{ns})\)</span>
      であった、という意味になります。</p>
      <!-- ## 標準入力からの書式付き入力の対応

      詳しいことは後日解説しますが、標準入力からスペース区切りの文字を受け取って、内部で数値として扱いたい場合は、次のコードで処理することができます。

      ```python{.numberLines}
      %reset -f
      s = input() # スペース区切りで数値入力「12.5 -37.5 0.71」
      a, b, c = map(float, s.split())

      print(a)
      print(b)
      print(c)
      ``` -->
      <!-- ## 課題 (宿題)

      GoogleClassroomに提示したリンクからTechFULのセッション「**PG1-課題03**」に参加し、問題に取り組んでください。

      - 前期中間試験に**相当する課題**です。標準的な試験勉強時間(6時間程度) + 試験実施時間 (1時間) をあわせた**約7時間をかけて取り組むことを想定した難易度**に設定しています。
        - 一部の問題については、次回の授業 (6月5日) でヒントを提示します。

      - **評価**：標準 (＝指示した最低限のことができている) を7.5点として、10点満点で評価します。
        - 0点～7.5点の範囲は絶対評価で点数をつけます。
        - 7.5点～10点の範囲は相対評価で点数をつけます。


      ## 準備

      - [TechFUL](https://techful-programming.com/) にログインしておいてください。
      - [GoogleColab.](https://colab.research.google.com/?hl=ja) にログインしておいてください。
        - 「**0605_繰返し構文.ipynb**」という名前でノートブックを作成しておいてください (今回、ノートブックの提出は**ありません**)。

      ## PG1-課題02の解答例①

      Google Colab. ノートブックにあわせて最小限の修正を加えています (`%reset -f`の追加など)。

      ### 自キャラを基準とした敵キャラの距離と方向の計算

      ```python{.numberLines}
      %reset -f
      import math
      # x1 = float(input()); y1 = float(input())
      # x2 = float(input()); y2 = float(input())
      x1, y1 = 2.3,   2
      x2, y2 = -1 , 4.5
      d = ((x1-x2)**2+(y1-y2)**2)**0.5 # 距離計算（三平方の定理）
      r = math.degrees( math.atan2((x2-x1),(y2-y1)) ) # 角度計算
      print(f'{d:.2f}')
      print(f'{r:.1f}')
      ```

      **べき乗の計算**には `**` 演算子を使用します。また $\sqrt{x}$ は、1年次の「**基礎数学**」で学んだように「 $\sqrt{x}=x^{\frac{1}{2}}=x^{0.5}$ 」であるため `x**0.5` (または`x**(1/2)`) で計算できます。

      なお `**` 演算子の使用を**推奨**しますが、別の方法として `import math` をしたうえで `math.sqrt(x)` で**平方根**を計算したり、`math.pow(x,5)` のように**べき乗**を計算したりできます。

      <div class="note type-tips">
      **\*\*演算子の優先順位**

      `**` 演算子の**優先順位**にしてください。**確信を持てない場合は、その都度確認するか、括弧をつけて使用してください**。

      ```python{.numberLines}
      a1 = 2**2*3   # -> (2**2)*3 -> 12
      a2 = 2**(2*3) # -> 64
      b1 = 2**1/2   # -> (2**1)/2 -> 1
      b2 = 2**(1/2) # -> 1.41..
      ```

      **確認**: 各変数に格納される値はどのようになるか。予想して確認せよ (一般に、このようなケースでは括弧を明示するべきである)。

      ```python{.numberLines}
      c1 = 5*2**2
      c2 = 4/2**2
      ```

      </div>

      <div class="note type-senior">
      **中級者向け:自力で平方根を求める**

      `**` 演算子や、mathモジュール (ライブラリ) を使わなくとも平方根を計算できます。以下に「**ニュートン法**」という手法により、繰返し計算から平方根を求める方法を示します。もちろん***非推奨***です。

      ```python{.numberLines}
      %reset -f
      import math
      n = 10 # 10の平方根を求める

      # 繰返し処理で平方根を計算する
      sqrt_n = n / 2
      for i in range(4): # 繰返し計算
        q = (sqrt_n + n / sqrt_n) / 2.0
        sqrt_n = q

      print(f'sqrt({n})= {sqrt_n:.20f} ライブラリを未使用')
      print(f'sqrt({n})= {math.sqrt(n):.20f} ライブラリを使用')
      print(f'sqrt({n})= {n**0.5:.20f} **演算子を使用')
      ```

      プログラムの実行結果は次のようになります。

      ```
      sqrt(10)= 3.16227766044413627355 ライブラリを未使用
      sqrt(10)= 3.16227766016837952279 ライブラリを使用
      sqrt(10)= 3.16227766016837952279 **演算子を使用
      ```

      `**` 演算子やmathライブラリを使った場合と結果を比較してください。

      </div> -->
      <!-- ## PG1-課題02の解答例②

      Google Colab. ノートブックで動作するように最小限の修正を加えています。

      ### 直線移動する自キャラのn秒後位置の計算

      ```python{.numberLines}
      %reset -f
      x1 = float(input()); y1 = float(input())
      x2 = float(input()); y2 = float(input())
      t = float(input())
      # x1, y1 = 6.25, 10.75
      # x2, y2 = 42.19, -30
      # t = 15
      vx = x2-x1; vy = y2-y1 # 自キャラ→目的地のベクトルのX成分とY成分
      dis = (vx**2+vy**2)**0.5  # 2点間の距離（ベクトルの大きさ）
      ux = vx/dis; uy = vy/dis  # 単位ベクトル

      # t秒後の位置は、現在位置 + t秒間に進む距離
      ptx = x1 + ux*t
      pty = y1 + uy*t
      print(f'({x1+ux*t:.2f},{y1+uy*t:.2f})')
      ```

      「**ベクトル・行列**」の授業で習っているように、単位ベクトルとは「**大きさが1のベクトル**」です。10行目のように、ベクトルを「ベクトルの**大きさ**」で割ることで、「単位ベクトル」を求めることができます。

      問題設定では「移動速度は $1$単位距離/秒 とする」としているので、$1$ 秒後には現在地点に「単位ベクトル」を加えた地点に移動します。そして、13行目・14行目のように、$t$ 秒後には<span class="masked">現在地点に「単位ベクトルを $t$ 倍したベクトル」加えた</span> 地点に移動します。

      ### 三角関数を利用して単位ベクトルを計算する方法

      `math.atan2()` と `math.sin()`、`math.cos()` を使って「単位ベクトル」を求めることもできます。

      ```python{.numberLines}
      %reset -f
      import math
      x1, y1 = 6.25, 10.75
      x2, y2 = 42.19, -30
      vx = x2-x1; vy = y2-y1
      theta = math.atan2(vy,vx)
      ux = math.cos(theta)
      uy = math.sin(theta)
      print(f'単位ベクトル ({ux:.2f},{uy:.2f})')
      ```

      実際に実行して <span class="masked">ベクトルを大きさで除して求めた場合と結果が一致する<こと</span> を確認してください。

      ## 複数の文を1行に記述

      通常、Pythonでは **1行に1文を記述** しますが、C/C++言語やJavaScriptのように、***セミコロン*** (`;`) で区切れば **1行に複数の文を記述** できます。XとYのようにペアになっているようなものは <span class="masked">1行にまとめて書いたほうが分かりやすい場合</span> もあります。必要に応じて使用してください。

      例えば、次の2つのプログラムは **実質的に同じプログラム** になります。

      ```python{.numberLines}
      x = input()
      y = input()
      z = input()
      ```

      ```python{.numberLines}
      x = input(); y = input(); z = input()
      ```

      ## アンパック (多重代入・展開)

      上に示したものと ***似て非なるもの*** に「**アンパック** (多重代入や展開とも呼ばれます) 」があります。

      これには、セミコロンではなく、**カンマ** `,` を使用します。アンパックは、この先の授業で登場する ***リスト*** や ***タプル*** に**深く関連した機能**となります。詳細については、以降の授業で解説します。

      例えば、次の2つのプログラムは、実質的に同じプログラムになります。

      ```python{.numberLines}
      x = 10
      y = 20
      z = 30
      ```

      ```python{.numberLines}
      x, y, z = 10, 20, 30
      ```

      セミコロンを使って1行に複数の文を記述することは可読性を損なわない限りは**どんな場面でも使用できます**。一方で、<span class="masked">アンパックは 変数に値を代入 (バインド) するケースでしか利用できません (使用するべきではありません)</span>。 -->
      <!-- ## PG1-課題03のヒント 

      いずれの問題も、まずは **紙上に図を描いて考えること** が何よりも大事です。この作業もしないまま「できない」「分からない」と投げ出したり、悲観したりするとのは、非常に愚かです。

      また、出題ページの末尾に記載される **補足とヒント** にも、必ず目を通してください。


      ### その点はXY平面の第何象限に存在するのか

      負数に対して `%` 演算子を使用する場合に注意してください。

      ```python{.numberLines}
      %reset -f
      print(  10%3    ) # ->  1
      print(  10%(-3) ) # -> -2
      print( -10%3    ) # ->  1
      print( -10%(-3) ) # -> -2
      ```

      ### バツ印の描画のための座標計算

      バツ印は、1本目の直接の**中点**で、2本目の直線と交差します。よって **中点を通って1本目の直線と垂直な線** を描くことでバツ印が描けます。

      あるベクトルと**直交するベクトルの求め方**は、数学の教科書やウェブを参照すればすぐに見つけることができます。

      - https://www.try-it.jp/chapters-5458/sections-5459/lessons-5520/

      もしくは、次のような幾何学的な性質に着目して解くこともできます。<span class="masked">緑の実線と破線の長さが同じであること、オレンジの実線と破線の長さが同じであることを利用します</span>。

      ![hint1](figs/07/hint1.png) -->
      <!-- ---------------------------------------- -->
    </main>

    <footer class="markdown-body">
      <p><a href="https://takeshiwada1980.github.io/Programming1-2025/">講義資料のIndexに移動</a></p>
    </footer>

    <script>
      window.onload = function () {
        // ナビゲーション関連
        let openBtn = document.getElementsByClassName("openbtn")[0];
        let navPnl = document.getElementById("g-nav");
        openBtn.onclick = () => {
          openBtn.classList.toggle("active");
          navPnl.classList.toggle("panelactive");
        };

        let items = navPnl.getElementsByTagName("a");
        Array.from(items).forEach((item) => {
          item.onclick = () => {
            openBtn.classList.toggle("active");
            navPnl.classList.toggle("panelactive");
          };
        });

        // マスク処理
        let maskedSpans = document.getElementsByClassName("masked");
        Array.from(maskedSpans).forEach((span) => {
          span.onclick = () => {
            span.classList.toggle("open");
          };
        });

        // data-startfrom 属性の行番号カウンタのリセット
        document.querySelectorAll("div.sourceCode").forEach(function (div) {
          var startFrom = div.getAttribute("data-startfrom");
          if (startFrom != null) {
            div.style.counterReset = "pg-line " + (startFrom - 1);
          }
        });

        // 画像にリンクを付与
        // let images = document.querySelectorAll("figure img");
        // Array.from(images).forEach((img) => {
        //   img.onclick = () => {
        //     location.href = img.getAttribute("src");
        //   };
        // });
      };
    </script>
  </body>
</html>
